"use strict";(self.webpackChunkcodespeak=self.webpackChunkcodespeak||[]).push([[569],{4569:function(e,n,t){t.r(n);var r=t(4165),a=t(5861),s=t(9439),o=t(2791),i=t(5193),c=t(890),u=t(9768),d=t(6151),l=t(6972),h=t(4554),p=t(3473),x=t(294),f=t(184),k=(0,p.J)("pk_live_51NBlexCvoPTehrPBwpkaUdDKdtfk9myjOAmZ5yTVDFampl6a6ptINWJ2177a0GwdJpnFPaRMUuI8pfZdrf8VFWHg00SfPUeneh");n.default=function(e){var n=e.open,t=e.onClose,p=(0,o.useState)(500),b=(0,s.Z)(p,2),g=b[0],v=b[1],Z=(0,i.Z)("(max-width:400px)"),m=(0,o.useState)(!1),C=(0,s.Z)(m,2),j=C[0],y=C[1],w=(0,o.useContext)(x.Vo).currentUser,P=null===w||void 0===w?void 0:w.uid,S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,s,o,i,c,u,d,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.next=5,fetch("https://ipapi.co/json/");case 5:return n=e.sent,e.next=8,n.json();case 8:return t=e.sent,a=t.country,s="usd","US"===a?s="usd":"CA"===a&&(s="cad"),e.next=14,fetch("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:g,currency:s,uid:P})});case 14:return o=e.sent,e.next=17,o.json();case 17:return i=e.sent,c=i.id,e.next=21,k;case 21:if(null!==(u=e.sent)){e.next=26;break}return console.log("Stripe failed to initialize"),y(!1),e.abrupt("return");case 26:return e.next=28,u.redirectToCheckout({sessionId:c});case 28:d=e.sent,(l=d.error)&&console.log("Error:",l),y(!1);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.jsx)(l.Z,{open:n,onClose:t,PaperProps:{style:{borderRadius:15}},children:(0,f.jsxs)(h.Z,{sx:{paddingX:2,paddingY:4,width:Z?230:300,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:8,overflowX:"hidden"},children:[(0,f.jsx)(c.Z,{variant:"h6",sx:{fontWeight:300},children:"Purchase Tokens"}),(0,f.jsx)(u.ZP,{value:g,onChange:function(e,n){v(n)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:500,marks:!0,min:500,max:1e4,sx:{width:"90%",color:"#2cb2a5","& .MuiSlider-track":{height:"8px"},"& .MuiSlider-thumb":{height:"24px",width:"24px",backgroundColor:"#2cb2a5"}}}),(0,f.jsx)(c.Z,{variant:"subtitle1",sx:{fontWeight:300},children:"".concat(g," Tokens")}),(0,f.jsx)(c.Z,{variant:"subtitle1",sx:{fontWeight:300},children:"\ud83d\udcb2".concat(g/500,".00")}),(0,f.jsx)(d.Z,{variant:"contained",sx:{marginTop:2,fontWeight:300,backgroundColor:"#2cb2a5",":hover":{backgroundColor:"#279f94"}},onClick:S,children:j?"Redirecting...":"Purchase"})]})})}}}]);
//# sourceMappingURL=569.70b62143.chunk.js.map